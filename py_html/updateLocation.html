<input type="button" id="scanLocation" value="Scan a Location"/>
<h3 id="locationName"></h3>
<div id="productDiv" style="visibility: collapse">
    <input type="button" id="scanProduct" value="Scan next Product"/>
    <p id="scanProductMessage"></p>
</div>

<script>
    var productDiv = document.getElementById('productDiv');
    var scanLocation = document.getElementById('scanLocation');
    var scanProduct = document.getElementById('scanProduct');
    var locationInfo = document.getElementById('locationName');
    var productMessage = document.getElementById('scanProductMessage');
    // Just to simulate qr code sometimes not working
    var error = false;

    function setMessage(success, message){
        productMessage.style.color = success ? 'green' : 'red';
        productMessage.innerHTML = message;
    }

    scanLocation.addEventListener('click', function(){
        scanQrCode(scanLocation, function(id){
            locationInfo.innerText = 'Current Location: ' + id;
            productDiv.style.visibility = 'visible';
        });
    });
    scanProduct.addEventListener('click', function(){
        productMessage.innerHTML = '';
        scanQrCode(scanProduct, function(id){
            console.log('Scanned product with id ' + id);
            if ((error = !error)){
                setMessage(false, 'Message when doesnt work. Press again for it to work');
            } else {
                setMessage(true, 'Message when it works. Pressing again makes message disappear as next product being scanned');
            }
        });
    });
</script>